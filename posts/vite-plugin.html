<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/2b0f6b284963c3b1.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c1e06d815ff161af.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-a560eba91f4c32be.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-cbe891f358786d92.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-266d143b70aded8b.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-893cf761196a6fd1.js" async="" crossorigin=""></script><script src="/_next/static/chunks/250-80c21a564ff3b1f0.js" async=""></script><script src="/_next/static/chunks/982-d2cabb4f0ee7870c.js" async=""></script><script src="/_next/static/chunks/app/layout-b6f24dc12e30950b.js" async=""></script><meta name="theme-color" content="#ff4646"/><title>Building a plugin with Vite</title><meta name="description" content="一个伪前端攻城狮的思考"/><link rel="manifest" href="/manifest.json"/><meta name="generator" content="Next.js"/><meta name="keywords" content="frontend"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script><style id="antd-cssinjs" data-rc-order="prepend" data-rc-priority="-1000">.data-ant-cssinjs-cache-path{content:"";}</style></head><body><div class="layout_container__116GV"><div class="layout_introInfo__j3_cd"><p>abc</p><p>ABC</p></div><div class="Nav_nav__NcI_j"><ul class="Nav_menu__ycYtD"><li class="Nav_menuItem__A1JiN "><a href="/">Home</a></li><li class="Nav_menuItem__A1JiN "><a href="/posts">My Blog</a></li><li class="Nav_menuItem__A1JiN "><a href="/life">Life</a></li><li class="Nav_menuItem__A1JiN "><a href="/about">About</a></li><li class="Nav_menuItem__A1JiN Nav_search__AMo5x"><span role="img" aria-label="search" style="font-size:20px" class="anticon anticon-search"><svg viewBox="64 64 896 896" focusable="false" data-icon="search" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg></span></li></ul></div><div><main><div class="page_container__F_fGo"><div><div class="page_date__W_wiy"><time dateTime="2024-04-08">April 8, 2024</time></div><h1 class="page_title__LVsLe">Building a plugin with Vite</h1><div class="page_detail__2BDGE"><ol>
<li>what is a vite plugin
a vite plugin is a rollup plugin with some options and hooks specific to vite that lets you custom functionality on top of vite to solve a particular problem.</li>
<li>vite plugin components
properties: name
build hooks: it is the promary way a plugin interacts with vite`s build process. hooks are functions that are called at various stages of the build.
output generation hooks</li>
<li>create a vite plugin
getting started creating a vite plugin is as simple as specifying a factory function in your vite.config.js file. this function will return the actual plugin object, which contains all the plugin definitions and logic. you can then pass this function to the plugins array in the defineConfig object.
configResolved is called after vite config has been resolved and you can use it to read and store the final resolved config.</li>
<li>plugin example: request analytics
configureServer hook to add a middleware to the vite server.
handleHotUpdate hook
writeBundle is a hook that fires after the bundle has been generated.</li>
</ol>
</div></div></div></main></div></div><script src="/_next/static/chunks/webpack-a560eba91f4c32be.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/2b0f6b284963c3b1.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/c1e06d815ff161af.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\na:I[3464,[\"250\",\"static/chunks/250-80c21a564ff3b1f0.js\",\"982\",\"static/chunks/982-d2cabb4f0ee7870c.js\",\"185\",\"static/chunks/app/layout-b6f24dc12e30950b.js\"],\"\"]\nb:I[7624,[\"250\",\"static/chunks/250-80c21a564ff3b1f0.js\",\"982\",\"static/chunks/982-d2cabb4f0ee7870c.js\",\"185\",\"static/chunks/app/layout-b6f24dc12e30950b.js\"],\"\"]\nd:I[8955,[],\"\"]\n8:[\"id\",\"vite-plugin\",\"d\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2b0f6b284963c3b1.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"LpvnwP6ByEnksnRMd_itx\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/vite-plugin\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"vite-plugin\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"vite-plugin\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"vite-plugin\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c1e06d815ff161af.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"$La\",null,{\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"layout_container__116GV\",\"children\":[[\"$\",\"div\",null,{\"className\":\"layout_introInfo__j3_cd\",\"children\":[[\"$\",\"p\",null,{\"className\":\"$undefined\",\"children\":\"abc\"}],[\"$\",\"p\",null,{\"className\":\"$undefined\",\"children\":\"ABC\"}]]}],[\"$\",\"$Lb\",null,{}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"main\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]]}]}]}]}],null]],\"initialHead\":[false,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]]\n"])</script><script>self.__next_f.push([1,"f:T43a,"])</script><script>self.__next_f.push([1,"\u003col\u003e\n\u003cli\u003ewhat is a vite plugin\r\na vite plugin is a rollup plugin with some options and hooks specific to vite that lets you custom functionality on top of vite to solve a particular problem.\u003c/li\u003e\n\u003cli\u003evite plugin components\r\nproperties: name\r\nbuild hooks: it is the promary way a plugin interacts with vite`s build process. hooks are functions that are called at various stages of the build.\r\noutput generation hooks\u003c/li\u003e\n\u003cli\u003ecreate a vite plugin\r\ngetting started creating a vite plugin is as simple as specifying a factory function in your vite.config.js file. this function will return the actual plugin object, which contains all the plugin definitions and logic. you can then pass this function to the plugins array in the defineConfig object.\r\nconfigResolved is called after vite config has been resolved and you can use it to read and store the final resolved config.\u003c/li\u003e\n\u003cli\u003eplugin example: request analytics\r\nconfigureServer hook to add a middleware to the vite server.\r\nhandleHotUpdate hook\r\nwriteBundle is a hook that fires after the bundle has been generated.\u003c/li\u003e\n\u003c/ol\u003e\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"page_container__F_fGo\",\"children\":[\"$\",\"div\",null,{\"className\":\"$undefined\",\"children\":[[\"$\",\"div\",null,{\"className\":\"page_date__W_wiy\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2024-04-08\",\"children\":\"April 8, 2024\"}]}],[\"$\",\"h1\",null,{\"className\":\"page_title__LVsLe\",\"children\":\"Building a plugin with Vite\"}],[\"$\",\"div\",null,{\"className\":\"page_detail__2BDGE\",\"dangerouslySetInnerHTML\":{\"__html\":\"$f\"}}]]}]}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"content\":\"#ff4646\"}],[\"$\",\"meta\",\"2\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"3\",{\"children\":\"Building a plugin with Vite\"}],[\"$\",\"meta\",\"4\",{\"name\":\"description\",\"content\":\"一个伪前端攻城狮的思考\"}],[\"$\",\"link\",\"5\",{\"rel\":\"manifest\",\"href\":\"/manifest.json\"}],[\"$\",\"meta\",\"6\",{\"name\":\"generator\",\"content\":\"Next.js\"}],[\"$\",\"meta\",\"7\",{\"name\":\"keywords\",\"content\":\"frontend\"}],[\"$\",\"link\",\"8\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>